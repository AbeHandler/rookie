
<!DOCTYPE html>
<html>
  <head>
<title>Rookie</title>
<meta name="viewport" content="width=device-width">

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.4.1/js/foundation.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.3/handlebars.min.js"></script>
    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
<link rel="stylesheet" href=https://s3-us-west-2.amazonaws.com/rookielens/css/lens.css>
<link rel="stylesheet" href=https://s3-us-west-2.amazonaws.com/rookielens/css/banner.css>
<link rel="stylesheet" href=https://s3-us-west-2.amazonaws.com/rookielens/css/contracts.css>
    <link rel=stylesheet type=text/css href="https://s3-us-west-2.amazonaws.com/rookielens/css/rookie.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.4.5/css/foundation.min.css">
<link rel='stylesheet' id='open-sans-css'  href='//fonts.googleapis.com/css?family=Open+Sans%3A300italic%2C400italic%2C600italic%2C300%2C400%2C600&#038;subset=latin%2Clatin-ext&#038;ver=3.8.3' type='text/css' media='all' />
<link rel="apple-touch-icon" href="https://lensnola.wpengine.netdna-cdn.com/wp-content/uploads/2013/01/TheLens-400x400_icon.png"/>

<link rel="canonical" href="https://thelensnola.org/" />
<link rel="shortcut icon" href="https://s3-us-west-2.amazonaws.com/lensnola/land-records/css/images/favicon.ico">

  <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.min.css">
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>


  </head>
  <body>

    <div id="banner" class="banner">
  <a href="https://thelensnola.org/" target="_blank" id="banner-logo" class="banner-logo">
      <img id="banner-image" src="https://s3-us-west-2.amazonaws.com/lensnola/realestate/css/images/lens-logo-retina.png" width="100" alt="The Lens logo">
  </a>
  <a href="/contracts/" id="banner-title" class="banner-title">Rookie</a>
</div>

    <div class="row hide-for-small-only">
      <div class="small-6 medium-12 small-centered columns">
        <h1 class="text-center">Search the Lens archive</h1>
      </div>
    </div>

    <div class="row">
          <div class="small-12 medium-12 large-12 columns">
              <div class="row collapse">
                  <div class="small-10 columns">
                       <select id="search_terms_combo" class="small-10 columns">
                       </select>
                  </div>
                  <div class="small-2 columns">
                    <a id="search_button" class="button postfix">Go</a>
                  </div>
             </div>
          </div>
    </div>

    <div class="row" id="results">
    </div>

    <div class="row">
  <div class="small-12 small-centered attribution columns" id="attribution">
    <div class="row">
      <div class="small-6 columns">
        <div class="row">
          <div class="small-12 columns">
            Learn <a href="https://github.com/AbeHandler/rookie" target="_blank">more</a> about this project
          </div>
        </div>
      </div>
      <div class="small-6 right columns">
        <div class="row">
          <div class="small-12 right columns">
            <div class="produced-by right" id="produced-by">
              In progress
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<script id="entry-template" type="text/x-handlebars-template">
         <div id="{{id}}" class="text-center result small-12 medium-12 large-12 columns">
              <div class="term small-7 columns small-offset-5">{{term}}</div>

              <div id="{{id}}_details" data-windows="{{windows}}" class="result_details nondisplay small-12 columns">
              </div>

        </div>
</script>

<script id="term_details" type="text/x-handlebars-template">
           <div>
           <span class="small-2 columns left">{{date}}</span>
           <a href="{{ url }}">
           <span class="padding small-3 columns left text-right">{{left}}</span>
           <span class="term small-2 columns">{{term}}</span>
           <span class="padding left small-4 columns text-left">{{right}}</span>
           </a>
           </div>
</script>
<script src="https://s3-us-west-2.amazonaws.com/rookielens/js/combobox.js"></script>
<script type="text/javascript" src="https://s3-us-west-2.amazonaws.com/rookielens/js/search.js"></script>
<script type="text/javascript">

function asycn_window_load (url) {
   $.getJSON(url, function(data){
      console.log(url);
      $.each(data, function(d, i){
       var source   = $("#term_details").html();
       var template = Handlebars.compile(source);
       var context = {date: $(this)[0], url: $(this)[4], left: $(this)[1], right: $(this)[3], term: $(this)[2]};
       var html = template(context);
       $("#" + $(this)[2].replace(/ /g, "_") + "_details").append(html);
     });
   });
 } 

var s = new RegExp('(=)(.{1,})');
var term = decodeURIComponent(s.exec(location.search)[2]);
term = term.replace(/ /g, "+");
var pmis = 'https://s3-us-west-2.amazonaws.com/rookielens/data/pmis/' + term +'.json.gz';
$.getJSON(pmis, function(data){
  $.each(data, function(d, i){
    var source   = $("#entry-template").html();
    var template = Handlebars.compile(source);
    var url2 = 'https://s3-us-west-2.amazonaws.com/rookielens/data/windows/' + term + '%23%23%23' + $(this)[0].replace(/ /g, "+") + '.json.gz';
    var context = {id: $( this )[0].replace(/ /g, "_"), term : $(this)[0], windows: url2};
    var html = template(context);
    $("#results").append(html);
  });
  $(".result_details").each(function(d){
    var url_to_fetch = $("#" + $(".result_details")[d].id).attr("data-windows");
    asycn_window_load(url_to_fetch);
  });
  $(".result").on("click", function(d){
    var toggle_this = "#" + this.id + "_details";
    $(toggle_this).toggleClass("nondisplay")
  });
});
</script>

<script type="text/javascript">
  $(document).foundation();
</script>

  </body>